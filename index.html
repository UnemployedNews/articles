<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Unemployed.com</title>
  <style>
    /* Theme tokens */
    :root{--bg:#0b1020;--card:#071020;--muted:#9aa4b2;--accent:#d9480f;--text:#e6eef6}
    [data-theme="light"]{--bg:#f7f7f8;--card:#ffffff;--muted:#6b7280;--accent:#c2410c;--text:#0b1220}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,Arial;background:linear-gradient(180deg,var(--bg) 0%, #071028 100%);color:var(--text);min-height:100vh}
    /* Header */
    header{display:flex;align-items:center;justify-content:space-between;padding:18px 26px;border-bottom:1px solid rgba(255,255,255,0.03);background:transparent}
    .brand{display:flex;gap:14px;align-items:baseline}
    .logo{font-weight:800;font-size:20px;color:var(--accent);font-family:Georgia, 'Times New Roman', serif}
    .tagline{color:var(--muted);font-size:13px}
    .controls{display:flex;align-items:center;gap:10px}
    .btn{background:transparent;border:0;color:var(--text);cursor:pointer;padding:8px;border-radius:8px}
    .gear{font-size:18px}
    /* Layout */
    .container{max-width:1100px;margin:24px auto;padding:0 18px}
    .layout{display:grid;grid-template-columns:1fr 300px;gap:22px}
    /* Main column */
    .main-col{display:flex;flex-direction:column;gap:18px}
    .headline{font-family:Georgia, 'Times New Roman', serif;font-size:36px;margin:0}
    .hero{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);padding:18px;border-radius:10px;border:1px solid rgba(255,255,255,0.03)}
    /* Cards */
    .cards{display:flex;flex-direction:column;gap:14px}
    .card{display:flex;gap:14px;background:var(--card);border-radius:10px;padding:14px;border:1px solid rgba(255,255,255,0.03);align-items:flex-start}
    .thumb{flex:0 0 140px;height:90px;background:#122233;border-radius:8px;overflow:hidden}
    .thumb img{width:100%;height:100%;object-fit:cover;display:block}
    .card-body{flex:1}
    .card-body h3{margin:0;font-size:18px;font-family:Georgia,serif}
    .meta{font-size:12px;color:var(--muted);margin-top:6px}
    .excerpt{margin-top:8px;color:var(--text);opacity:0.9}
    .read-more{margin-top:10px;color:var(--accent);cursor:pointer;display:inline-block}
    /* Sidebar */
    .sidebar{position:relative}
    .search{margin-bottom:12px}
    #q{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(0,0,0,0.08);background:transparent;color:var(--text)}
    .tag{display:inline-block;background:rgba(255,255,255,0.03);padding:6px 10px;border-radius:999px;font-size:12px;margin:6px 6px 0 0;color:var(--text)}
    /* Article view */
    .article-view{max-width:900px;margin:0 auto;padding:22px;background:var(--card);border-radius:12px}
    .article-view h1{font-family:Georgia,serif}
    .banner{width:100%;height:340px;object-fit:cover;border-radius:10px;margin-bottom:12px}
    /* Settings modal */
    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.5);display:flex;align-items:flex-start;justify-content:center;padding-top:60px}
    .modal{background:var(--card);padding:18px;border-radius:10px;max-width:420px;width:calc(100% - 40px);border:1px solid rgba(255,255,255,0.04)}
    .row{display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-bottom:1px dashed rgba(255,255,255,0.02)}
    label{font-size:14px}
    .switch{display:inline-flex;gap:8px;align-items:center}
    /* Submit form */
    .submit-form{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.7);align-items:center;justify-content:center;z-index:1000}
    .submit-form.active{display:flex}
    .submit-modal{background:var(--card);padding:24px;border-radius:12px;max-width:500px;width:90%;max-height:80vh;overflow-y:auto}
    .submit-modal h3{margin-top:0;margin-bottom:16px}
    .form-group{margin-bottom:16px}
    .form-group label{display:block;margin-bottom:6px;font-size:14px;color:var(--muted)}
    .form-control{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.1);background:rgba(0,0,0,0.2);color:var(--text);font-family:inherit;font-size:14px}
    textarea.form-control{min-height:120px;resize:vertical}
    .form-actions{display:flex;gap:10px;justify-content:flex-end;margin-top:20px}
    .btn-primary{background:var(--accent);color:white;padding:10px 20px;border-radius:8px;border:none;cursor:pointer}
    .btn-secondary{background:rgba(255,255,255,0.1);color:var(--text);padding:10px 20px;border-radius:8px;border:none;cursor:pointer}
    .copy-success{display:none;color:#4ade80;font-size:14px;margin-top:10px;text-align:center}
    .copy-success.show{display:block}
    .email-instructions{background:rgba(255,255,255,0.05);padding:12px;border-radius:8px;margin-top:20px;font-size:14px}
    footer{color:var(--muted);text-align:center;padding:28px 6px;font-size:13px;margin-top:30px}
    @media (max-width:900px){.layout{grid-template-columns:1fr}.sidebar{order:2}.thumb{display:none}}
  </style>
</head>
<body data-theme="dark">
  <header>
    <div class="brand">
      <div class="logo">Unemployed.com</div>
      <div class="tagline">The only place for real* news.</div>
    </div>
    <div class="controls">
      <button class="btn" id="submit-article" title="Submit Article">✏️ Submit</button>
      <button class="btn" id="status-brief" title="Employment status">Status: <span id="status-text">—</span></button>
      <button class="btn gear" id="open-settings" title="Settings">⚙️</button>
    </div>
  </header>
  <main class="container" id="app">
    <div class="layout">
      <div class="main-col">
        <div class="hero">
          <h2 class="headline" id="hero-title">Latest Headlines</h2>
          <div id="hero-sub" class="meta">The Realest* News of All Time</div>
        </div>
        <div class="cards" id="cards"></div>
      </div>
      <aside class="sidebar">
        <div class="search">
          <input id="q" placeholder="Search headlines or tags..." />
        </div>
        <div id="tags"></div>
        <div style="height:12px"></div>
        <div style="padding:12px;border-radius:10px;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);border:1px solid rgba(255,255,255,0.02)">
          <div style="font-size:13px;color:var(--muted)">Profiles</div>
          <div style="font-size:13px;color:var(--text);margin-top:8px">Use the settings gear to toggle theme and employment status.</div>
        </div>
      </aside>
    </div>
    <!-- Article view (hidden by default) -->
    <div id="article-view" style="display:none;margin-top:18px">
      <div class="article-view" id="article-content"></div>
    </div>
  </main>
  
  <!-- Submit Article Form -->
  <div class="submit-form" id="submit-form">
    <div class="submit-modal">
      <h3>Submit Article to Unemployed.com</h3>
      <p style="font-size:14px;color:var(--muted);margin-bottom:20px">Submit your satirical news article for consideration.</p>
      
      <div class="form-group">
        <label for="submit-title">Article Title *</label>
        <input type="text" id="submit-title" class="form-control" placeholder="Enter your catchy headline" />
      </div>
      
      <div class="form-group">
        <label for="submit-author">Your Name/Alias *</label>
        <input type="text" id="submit-author" class="form-control" placeholder="Enter your name or pen name" />
      </div>
      
      <div class="form-group">
        <label for="submit-content">Article Content *</label>
        <textarea id="submit-content" class="form-control" placeholder="Write your hilarious satirical article here..."></textarea>
      </div>
      
      <div class="form-group">
        <label for="submit-tags">Tags (comma separated)</label>
        <input type="text" id="submit-tags" class="form-control" placeholder="featured, politics, tech, etc." />
      </div>
      
      <div class="email-instructions">
        <strong>How to submit:</strong>
        <ol style="margin:8px 0;padding-left:20px">
          <li>Click "Copy Email Content" below</li>
          <li>Open your email app</li>
          <li>Create new email to: <code>notascammer1123@gmail.com</code></li>
          <li>Paste the copied content</li>
          <li>Send!</li>
        </ol>
      </div>
      
      <div class="copy-success" id="copy-success">✅ Email content copied to clipboard!</div>
      
      <div class="form-actions">
        <button class="btn-secondary" id="cancel-submit">Cancel</button>
        <button class="btn-primary" id="copy-content">Copy Email Content</button>
      </div>
    </div>
  </div>
  
  <footer>© Unemployed.com — The only place for real* news.</footer>
  
  <!-- Settings modal template -->
  <template id="settings-template">
    <div class="modal-backdrop" id="modal-backdrop">
      <div class="modal" role="dialog" aria-modal="true">
        <h3 style="margin-top:0">Settings</h3>
        <div class="row">
          <label>Theme</label>
          <div class="switch">
            <select id="theme-select">
              <option value="dark">Dark</option>
              <option value="light">Light</option>
              <option value="system">System</option>
            </select>
          </div>
        </div>
        <div class="row">
          <label>Employment status</label>
          <div class="switch">
            <select id="employment-select">
              <option value="unknown">Prefer not to say</option>
              <option value="employed">Employed</option>
              <option value="unemployed">Unemployed</option>
            </select>
          </div>
        </div>
        <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
          <button id="close-modal" class="btn">Close</button>
        </div>
      </div>
    </div>
  </template>
  
  <script>
    /***** ARTICLES: edit this array to add or change articles *****/
    const ARTICLES = [
      {
  id: '2025-12-07-dinosaur-trash',
  title: '“Nenenenen” Broadcast Sends The Country Into Mass Panic',
  author: 'Geo',
  date: 'December 7, 2025',
  tags: ['weird','gasp','featured','news', 'staysafe','roblox'],
  excerpt: 'Earlier today, a live broadcast from Bloxburg News left the nation on edge...',
image:'https://i.ytimg.com/vi/PwJL04MRVyA/maxresdefault.jpg',
        content: `<p>Today, Bloxburg News aired their daily news that instantly froze the nation. The anchor, in a stark black suit, spoke only a single, chilling phrase:

“Nenenenenenen… nene. Nenen.”

There were no further instructions, no context, but everyone knew. Screens went dark, cars stopped on highways, workplaces emptied, and citizens everywhere braced themselves.<br><br>

Social media erupted:<br><br>

“Everyone heard it. We all know what’s coming.”<br>
“Stay inside. Don’t move. It is here.”<br>
“It’s the end, people. It’s really happening.”<br>

Experts made no attempt to explain; explanation is unnecessary. The meaning of “nenenen” is universal, immediate, and absolute.<br><br>

From city streets to rural towns, people acted in unison, following instinctual precautions. Nothing else needed to be said.<br><br>

As the nation waits for the next broadcast, one thing is certain: when Bloxburg News says “nenenen,” everyone has to listen.</p>`
      },
      {
  id: '2025-12-07-dinosaur-trash',
  title: 'New Zealand man accused of eating Faberge pendant',
  author: 'Geo',
  date: 'December 7, 2025',
  tags: ['weird','gasp','featured','dinosaur'],
  excerpt: 'New Zealand man accused of eating Faberge pendant inspired by Bond movie as police wait for evidence',
image:'https://i.pinimg.com/564x/69/bd/16/69bd16e9a4ed0bd906db4a098ddfb121.jpg',
        content: `<p>Police have recovered a diamond-studded, James Bond–inspired Fabergé “Octopussy” pendant after a 32-year-old man allegedly swallowed the item in an attempt to smuggle it out of a jewellery store — and waited six days for nature to take its course.<br><br>

The suspect was arrested inside the store shortly after the alleged theft, carried out on 28 November at Partridge Jewellers. Police say the pendant, valued at NZ $33,000 (≈ US $19,000), was swallowed in full. <br><br>

Rather than resort to invasive procedures, investigators opted to place the man under continuous supervision and monitor bodily output carefully. On Thursday night, officers recovered the pendant — chain, price tag and all — from the suspect’s gastrointestinal tract. 
<br><br>

The pendant is a limited-edition Fabergé creation: a green-enamel egg locket encrusted with 183 diamonds and two sapphires, with an 18-carat gold octopus “surprise” concealed inside. Only 50 of these 007-inspired pieces were made. 
<br><br>

Police confirmed the item’s integrity: it emerged unscathed, and no medical intervention was required. The suspect remains in custody; his next court appearance is scheduled for 8 December. 
<br><br>

An officer from the investigation team said the recovery marked “an outcome few would have predicted,” noting the “heavy duty of care” required while waiting for the pendant’s natural passage.</p>`
      },
      {
  id: '2025-12-07-dinosaur-trash',
  title: 'Someone dumped trash while wearing a T-rex costume',
  author: 'Geo',
  date: 'December 7, 2025',
  tags: ['weird','gasp','featured','dinosaur'],
  excerpt: 'UK police search for dinosaur-costumed "fly tipper" after CCTV captures bizarre bin dumping and moonwalk.',
image:'https://images.ctfassets.net/pjshm78m9jt4/2ETgM20rqfrA6LM5gGTj6a/7110418b1fa51c4d32776b3320ec78e0/Screenshot_2025-12-05_102806.png?fm=jpg&fit=fill&w=1600&q=80',        content: `<p>Authorities in Southend-on-Sea are attempting to identify a person dressed in a bright purple dinosaur costume who was recorded on CCTV depositing two trash bags next to neighborhood wheelie bins at approximately 2:14 AM Tuesday.<br><br>

The individual, described as “roughly two meters tall” according to the council’s statement, approached the bins carrying one bag in each arm, paused for six seconds, then placed both bags down beside the bins before performing what officials called a “hesitation shuffle” around a nearby lamppost. Police also confirmed that the suspect executed a “partial moonwalk,” though they declined to comment further.<br><br>

Council spokesperson Martin Havers said the bags contained “mixed domestic waste, mostly food packaging and paper towel rolls,” adding that the trash had not been sorted for recycling despite visible cardboard.<br><br>

Area resident Sharon Weaver reported hearing “rustling and light squeaking,” but said she assumed it was a cat.<br><br>

The council released still images from the CCTV footage, showing the suspect’s small T-rex-style arms and elongated tail. Havers clarified the costume was similar to inflatable dinosaur suits sold online but “more purple than typical retail listings.”<br><br>

Officials say fly-tipping fines could reach £400. The suspect remains unidentified. Authorities have asked the public to report any information on individuals who “own or regularly wear a purple dinosaur costume.”</p>`
      },
      {
        id: '2025-11-30-coffee-shortage',
        title: 'Official Statement From Skibidi shocks the world: "I Am Not From Ohio"',
        author: 'The Rizzler of OZ',
        date: 'November 30, 2025',
        tags: ['featured','skibidi'],
        excerpt: 'After Conspiracies and clues, Skibidi finally reveals that he is NOT from Ohio, putting the world in a great depression.',
        image: 'https://media.cnn.com/api/v1/images/stellar/prod/screen-shot-2024-07-25-at-10-27-16-am.jpg?c=16x9&q=h_833,w_1480,c_fill',
        content: `<p>In a development that has surprised cultural analysts and destabilized several online communities, Skibidi — the digital figure whose origins, identity, and intentions have been the subject of ongoing speculation — issued a rare public statement Wednesday clarifying that he is "not from Ohio."<br><br>
        The statement, delivered in a brief press release forwarded to multiple news outlets, read in its entirety: "I am NOT from Ohio."<br><br>
        Although short, experts say the text carries significant implications.<br><br>
        "This is the clearest denial to date," noted Dr. Leonard Krayn, a professor of Digital Semiotics at Northwestern University. "For years, rumors circulated that Skibidi's origins were tied to the Midwest. Today's clarification formally disrupts that narrative."<br><br>
        The U.S. Census Bureau declined to comment on whether Skibidi had ever been counted in Ohio population surveys. Ohio Governor Michael DeWine's office released a cautious note late Wednesday simply stating that the administration had received Skibidi's remarks and was "reviewing jurisdictional relevance."<br><br>
        Internationally, the implications are widening.<br><br>
        "By explicitly denying Ohio affiliation, Skibidi leaves open the question of whether he may, in fact, be from a non-contiguous U.S. territory," said geopolitical analyst Mariah Henderson. "Puerto Rico, Guam, and parts of Canada have already been floated as possibilities."</p>`
      },

      {
        id: '2025-12-03-robot-interview',
        title: 'Local hero proves the relation between 6 7 and Mangos',
        author: 'Geo',
        date: 'December 3, 2025',
        tags: ['67','gasp','featured','mango'],
        excerpt: 'Local hero finally finds the correlation between 6 7 and Mangos, spreads news all over the internet.',
        image: 'https://preview.redd.it/6-7-mango-meme-v0-by830zk86njf1.jpeg?auto=webp&s=ac730a08250ce058226e2c5d59fa7b051206b571',
        content: `<p>A self-taught data analyst from the local community has published what experts are calling "the most unintentionally destabilizing mathematical discovery of the decade," revealing a direct correlation between the numbers 6 and 7 and the mango tree distribution in Guinea-Bissau.<br><br>
        The theory, released in a 4,000-word online paper, begins with a simple observation: 6 is the sixth letter of the alphabet, representing "F," commonly used to denote France. 7 maps to "G," standing for Germany.<br><br>
        From that point, the researcher cross-referenced population data for both nations. France currently has a population of 66,694,631; Germany has 83,871,626. Subtracting France's population from Germany's yields a number approximating the population of Guinea-Bissau.<br><br>
        The final step, according to the paper, is the summation: 6 + 7 = 13.<br>
        This calculation, the author asserts, "cannot be dismissed as trivial," because the 13th most prevalent plant species in Guinea-Bissau is the mango tree.<br><br>
        The publication has sent ripples through multiple fields, including mathematics, agricultural science, and international relations.<br><br>
        European demographers initially rejected the findings as "irrelevant," but within hours the study was cited by multiple independent researchers attempting to replicate the results.<br><br>
        "The conclusion is uncomfortable," said Dr. Hilde Brandt, a population statistician at the University of Bonn. "It implies that mango distribution patterns in West Africa are functionally entangled with the alphabetical representation of Western European nation-states."</p>`
      },
      {
        id: '2025-11-30-coffee-shortage',
        title: 'Official Statement From Skibidi shocks the world: "I Am Not From Ohio"',
        author: 'The Rizzler of OZ',
        date: 'November 30, 2025',
        tags: ['featured','skibidi'],
        excerpt: 'After Conspiracies and clues, Skibidi finally reveals that he is NOT from Ohio, putting the world in a great depression.',
        image: 'https://media.cnn.com/api/v1/images/stellar/prod/screen-shot-2024-07-25-at-10-27-16-am.jpg?c=16x9&q=h_833,w_1480,c_fill',
        content: `<p>In a development that has surprised cultural analysts and destabilized several online communities, Skibidi — the digital figure whose origins, identity, and intentions have been the subject of ongoing speculation — issued a rare public statement Wednesday clarifying that he is "not from Ohio."<br><br>
        The statement, delivered in a brief press release forwarded to multiple news outlets, read in its entirety: "I am NOT from Ohio."<br><br>
        Although short, experts say the text carries significant implications.<br><br>
        "This is the clearest denial to date," noted Dr. Leonard Krayn, a professor of Digital Semiotics at Northwestern University. "For years, rumors circulated that Skibidi's origins were tied to the Midwest. Today's clarification formally disrupts that narrative."<br><br>
        The U.S. Census Bureau declined to comment on whether Skibidi had ever been counted in Ohio population surveys. Ohio Governor Michael DeWine's office released a cautious note late Wednesday simply stating that the administration had received Skibidi's remarks and was "reviewing jurisdictional relevance."<br><br>
        Internationally, the implications are widening.<br><br>
        "By explicitly denying Ohio affiliation, Skibidi leaves open the question of whether he may, in fact, be from a non-contiguous U.S. territory," said geopolitical analyst Mariah Henderson. "Puerto Rico, Guam, and parts of Canada have already been floated as possibilities."</p>`
      },
      {
        id: '2025-11-25-coffee-shortage',
        title: 'NASA reveals Mr. Big Bang cheated on Mrs. Big Crunch',
        author: 'The Rizzler of OZ',
        date: 'November 25, 2025',
        tags: ['big','gasp','cheater','omg'],
        excerpt: 'NASA reveals Mr. Big Bang cheated on Mrs. Big Crunch on Dark Matter #42',
        image: 'https://images.newscientist.com/wp-content/uploads/2014/12/11160643/big-bang-fhymk7.jpg?crop=4:3,smart&width=1200&height=900&upscale=true',
        content: `<p>In what officials are calling "an unexpected and deeply troubling development," NASA researchers announced Thursday that forensic analysis of Dark Matter Sample #42 has revealed evidence of a long-running extrarelational relationship between cosmological entities Mr. Big Bang and Mrs. Big Crunch.<br><br>
        The discovery occurred during a routine structural examination of the sample — officially classified as Fragment 42-B — when physicists detected anomalous quantum signatures inconsistent with currently accepted cosmological monogamy frameworks.<br><br>
        "As we sequenced the energy patterns, it became clear that this was not a purely gravitational artifact," said Dr. Imani Foster, a senior astrophysicist at NASA's Cosmic Relations Division. "The evidence points to prolonged interaction between Big Bang and an unidentified dark matter body, which deep-space metadata suggests was not Mrs. Big Crunch."<br><br>
        Mrs. Big Crunch, widely theorized to represent the potential final collapse phase of the universe, has not issued a public statement. Senior researchers say her silence is "measured but powerful."<br><br>
        The incident sheds new light on the interpersonal dynamics of cosmic-scale phenomena previously assumed to be unshakeably stable.<br><br>
        "For nearly a century, our models assumed that Big Bang and Big Crunch maintained a closed cosmic loop — a kind of universal marriage," said Dr. Kenneth Reyes, professor of spacetime ethics at Caltech. "Finding that Dark Matter piece #42 contains emotional residue from a third party challenges every assumption we've made about anything."<br><br>
        NASA insists the disclosure is not intended to sensationalize, but to maintain transparency within the astrophysics community.<br><br>
        "Trust in the scientific process is essential," said NASA spokesperson Ellen Moore. "We cannot meaningfully model universal destiny while obscuring relational instability at the foundational scale."<br><br>
        Meanwhile, unidentified sources within the agency suggest that the Dark Matter involved may not have been purely passive.<br><br>
        The document also indicates that the affair may have impacted cosmic expansion rates from the earliest milliseconds following the initial inflationary era. Analysts warn that additional revelations could further complicate models of universal trajectory.<br><br>
        As of press time, researchers are preparing a follow-up press briefing to address growing speculation regarding the cosmic consequences of the disclosed relationship. Independent laboratories have begun examining Sample #43 for corroboration.<br><br>
        No date has been set for divorce proceedings.</p>`
      },
    ];
    /***** end ARTICLES *****/

    // --- elements ---
    const $cards = document.getElementById('cards');
    const $articleView = document.getElementById('article-view');
    const $articleContent = document.getElementById('article-content');
    const $listView = document.getElementById('app');
    const $q = document.getElementById('q');
    const $tags = document.getElementById('tags');
    const $openSettings = document.getElementById('open-settings');
    const $statusBrief = document.getElementById('status-brief');
    const $statusText = document.getElementById('status-text');
    const $submitArticle = document.getElementById('submit-article');
    const $submitForm = document.getElementById('submit-form');
    const $cancelSubmit = document.getElementById('cancel-submit');
    const $copyContent = document.getElementById('copy-content');
    const $copySuccess = document.getElementById('copy-success');
    const $submitTitle = document.getElementById('submit-title');
    const $submitAuthor = document.getElementById('submit-author');
    const $submitContent = document.getElementById('submit-content');
    const $submitTags = document.getElementById('submit-tags');

    // --- settings / prefs ---
    const PREFS_KEY = 'unemployed_prefs_v1';
    const defaultPrefs = {
      theme: 'dark',
      employment: 'unknown'
    };
    function loadPrefs(){
      try{
        const raw = localStorage.getItem(PREFS_KEY);
        return raw ? JSON.parse(raw) : defaultPrefs
      }catch(e){return defaultPrefs}
    }
    function savePrefs(p){
      localStorage.setItem(PREFS_KEY, JSON.stringify(p));
      applyPrefs(p);
    }
    function applyPrefs(p){
      if(!p) p = loadPrefs();
      // theme handling
      if(p.theme === 'system'){
        const mq = window.matchMedia('(prefers-color-scheme: light)');
        document.body.setAttribute('data-theme', mq.matches ? 'light' : 'dark');
      }
      else {
        document.body.setAttribute('data-theme', p.theme);
      }
      // employment brief
      $statusText.textContent = (p.employment === 'employed') ? 'Employed' :
                               (p.employment === 'unemployed') ? 'Unemployed' : '—';
    }

    // --- article submission functions ---
    function openSubmitForm() {
      $submitForm.classList.add('active');
      // Clear form fields
      $submitTitle.value = '';
      $submitAuthor.value = '';
      $submitContent.value = '';
      $submitTags.value = '';
      $copySuccess.classList.remove('show');
    }

    function closeSubmitForm() {
      $submitForm.classList.remove('active');
    }

    function copyToClipboard() {
      const title = $submitTitle.value.trim();
      const author = $submitAuthor.value.trim();
      const content = $submitContent.value.trim();
      const tags = $submitTags.value.trim();
      
      // Basic validation
      if (!title || !author || !content) {
        alert('Please fill in all required fields (Title, Author, and Content).');
        return;
      }
      
      // Create email content
      const emailContent = `SUBJECT: Article Submission for Unemployed.com: ${title}

TO: notascammer1123@gmail.com

ARTICLE DETAILS:
Title: ${title}
Author: ${author}
Date: ${new Date().toLocaleDateString()}
Tags: ${tags || 'None specified'}

ARTICLE CONTENT:
${content}

---
Submitted via Unemployed.com submission form`;
      
      // Copy to clipboard
      navigator.clipboard.writeText(emailContent).then(() => {
        // Show success message
        $copySuccess.classList.add('show');
        
        // Scroll to show the success message
        $copySuccess.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        
        // Hide success message after 5 seconds
        setTimeout(() => {
          $copySuccess.classList.remove('show');
        }, 5000);
      }).catch(err => {
        console.error('Failed to copy: ', err);
        alert('Failed to copy to clipboard. Please select and copy the text manually.');
      });
    }

    // --- rendering ---
    function renderCards(list){
      $cards.innerHTML = '';
      if(list.length === 0){
        $cards.innerHTML = '<div style="color:var(--muted)">No articles match that search.</div>';
        return
      }
      list.forEach(a=>{
        const el = document.createElement('article');
        el.className = 'card'+(a.tags && a.tags.includes('featured')? ' featured':'');
        const thumb = document.createElement('div');
        thumb.className = 'thumb';
        if(a.image){
          const img = document.createElement('img');
          img.src = a.image;
          img.alt = a.title;
          thumb.appendChild(img);
        }
        const body = document.createElement('div');
        body.className = 'card-body';
        body.innerHTML = `<h3>${escapeHtml(a.title)}</h3><div class="meta">${escapeHtml(a.author)} — ${escapeHtml(a.date)}</div><div class="excerpt">${escapeHtml(a.excerpt)}</div><div style="margin-top:8px"><span class="read-more" data-id="${a.id}">Read</span></div>`;
        el.appendChild(thumb);
        el.appendChild(body);
        $cards.appendChild(el);
      })
      // attach read clicks
      document.querySelectorAll('.read-more').forEach(btn=>btn.addEventListener('click',e=>openArticle(e.target.dataset.id)));
    }

    function renderTags(){
      const tagSet = new Set();
      ARTICLES.forEach(a=> (a.tags||[]).forEach(t=>tagSet.add(t)) );
      $tags.innerHTML = '';
      Array.from(tagSet).forEach(t=>{
        const b = document.createElement('button');
        b.className = 'tag';
        b.textContent = t;
        b.addEventListener('click',()=>{
          $q.value = t;
          applyFilter();
        });
        $tags.appendChild(b);
      })
    }

    function openArticle(id){
      const a = ARTICLES.find(x=>x.id===id);
      if(!a) return;
      location.hash = '#article='+id;
      document.getElementById('article-view').style.display = 'block';
      // hide main listing
      document.querySelector('.layout').style.display = 'none';
      const banner = a.image ? `<img src="${a.image}" class="banner" alt="${escapeHtml(a.title)}">` : '';
      $articleContent.innerHTML = `<div class="back" style="cursor:pointer;color:var(--muted);margin-bottom:12px;" onclick="goHome()">← Back to headlines</div>${banner}<h1>${escapeHtml(a.title)}</h1><div class="meta">${escapeHtml(a.author)} — ${escapeHtml(a.date)}</div><div style="height:12px"></div>${a.content}`;
      window.scrollTo(0,0);
    }

    function goHome(){
      location.hash = '';
      document.getElementById('article-view').style.display = 'none';
      document.querySelector('.layout').style.display = 'grid';
    }

    function applyFilter(){
      const q = ($q && $q.value) ? $q.value.trim().toLowerCase() : '';
      const out = ARTICLES.filter(a=>{
        if(!q) return true;
        return [a.title,a.excerpt,a.author,(a.tags||[]).join(' ')].join(' ').toLowerCase().includes(q);
      });
      renderCards(out);
    }

    function escapeHtml(s){
      return (s+'').replace(/[&<>"']/g,function(c){return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;"}[c]});
    }

    // --- safe event wiring: ensure elements exist ---
    if($q){
      $q.addEventListener('input',applyFilter);
    }

    // Article submission event listeners
    if($submitArticle) {
      $submitArticle.addEventListener('click', openSubmitForm);
    }
    
    if($cancelSubmit) {
      $cancelSubmit.addEventListener('click', closeSubmitForm);
    }
    
    if($copyContent) {
      $copyContent.addEventListener('click', copyToClipboard);
    }

    // Close form when clicking on backdrop
    $submitForm.addEventListener('click', function(e) {
      if (e.target === $submitForm) {
        closeSubmitForm();
      }
    });

    // Close form with Escape key
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape' && $submitForm.classList.contains('active')) {
        closeSubmitForm();
      }
    });

    // initial render
    renderTags();
    renderCards(ARTICLES);

    // hash routing
    window.addEventListener('hashchange',()=>{
      const h = location.hash.replace('#','');
      if(!h) {
        goHome();
        return
      }
      if(h.startsWith('article=')){
        const id = h.split('=')[1];
        openArticle(id);
      }
    });
    if(location.hash.startsWith('#article=')){
      const id = location.hash.replace('#article=','');
      setTimeout(()=>openArticle(id),50);
    }

    // --- settings modal handling ---
    function openSettingsModal(){
      const tpl = document.getElementById('settings-template');
      const node = tpl.content.cloneNode(true);
      document.body.appendChild(node);
      const backdrop = document.getElementById('modal-backdrop');
      const themeSelect = document.getElementById('theme-select');
      const empSelect = document.getElementById('employment-select');
      const close = document.getElementById('close-modal');
      // set current values
      const prefs = loadPrefs();
      if(themeSelect) themeSelect.value = prefs.theme || 'dark';
      if(empSelect) empSelect.value = prefs.employment || 'unknown';
      themeSelect.addEventListener('change',()=>{
        prefs.theme = themeSelect.value;
        savePrefs(prefs);
      });
      empSelect.addEventListener('change',()=>{
        prefs.employment = empSelect.value;
        savePrefs(prefs);
      });
      close.addEventListener('click',()=>{
        backdrop.remove();
      });
      backdrop.addEventListener('click',(e)=>{
        if(e.target === backdrop) backdrop.remove();
      });
    }

    if($openSettings) $openSettings.addEventListener('click',openSettingsModal);

    // apply prefs on load
    applyPrefs(loadPrefs());

    // expose goHome globally for inline onclick
    window.goHome = goHome;
  </script>
</body>
</html>